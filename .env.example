# BIMCalc Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# Database (REQUIRED)
# ============================================================================
# PostgreSQL connection string with asyncpg driver
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/bimcalc

# ============================================================================
# BIMCalc Core Settings
# ============================================================================
# Organization identifier for multi-tenant scoping
DEFAULT_ORG_ID=acme-construction

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================================================
# EU Locale & Currency (Defaults shown)
# ============================================================================
DEFAULT_CURRENCY=EUR
VAT_INCLUDED=true
VAT_RATE=0.23

# ============================================================================
# Matching Thresholds
# ============================================================================
# RapidFuzz minimum score (0-100)
FUZZY_MIN_SCORE=70

# Auto-accept confidence threshold
AUTO_ACCEPT_MIN_CONFIDENCE=85

# Physical tolerances
SIZE_TOLERANCE_MM=10
ANGLE_TOLERANCE_DEG=5
DN_TOLERANCE_MM=5

# Candidate generation
MAX_CANDIDATES_PER_ITEM=50
CLASS_BLOCKING_ENABLED=true

# ============================================================================
# Database Performance Tuning
# ============================================================================
DB_POOL_SIZE=10
DB_POOL_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_ECHO=false

# ============================================================================
# Vector Search (Optional - for RAG agent)
# ============================================================================
VECTOR_INDEX_TYPE=ivfflat
VECTOR_LISTS=100

# ============================================================================
# OpenAI API (Optional - for RAG agent)
# ============================================================================
# OPENAI_API_KEY=sk-...
# EMBEDDINGS_MODEL=text-embedding-3-large
# LLM_MODEL=gpt-4-1106-preview

# Alternative: Azure OpenAI
# AZURE_OPENAI_ENDPOINT=https://your-instance.openai.azure.com/
# AZURE_OPENAI_API_KEY=...
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# ============================================================================
# Neo4j Graph Database (Optional)
# ============================================================================
# NEO4J_URI=bolt://localhost:7687
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=changeme
# NEO4J_DATABASE=neo4j

# ============================================================================
# Classification Mapping Module (CMM)
# ============================================================================
# Enable vendor-specific code translation
USE_CMM=true
# Directory containing vendor mapping YAML files
CMM_CONFIG_DIR=config/vendors

# ============================================================================
# Web UI Configuration
# ============================================================================
WEB_HOST=127.0.0.1
WEB_PORT=8002
WEB_RELOAD=false

# ============================================================================
# Archon MCP Server (Optional - for project/task tracking)
# ============================================================================
# ARCHON_SERVER=http://localhost:7007
# ARCHON_TOKEN=...
